

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>7.11. Options related to a particular phase &#8212; Glasgow Haskell Compiler 8.5.20180310 User&#39;s Guide</title>
    <link rel="stylesheet" href="_static/ghc-theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '8.5.20180310',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Glasgow Haskell Compiler 8.5.20180310 User&#39;s Guide"
          href="_static/opensearch.xml"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="7.12. Using shared libraries" href="shared_libs.html" />
    <link rel="prev" title="7.10. GHC Backends" href="codegens.html" /> 
  </head>
  <body>
<div class="logo">
    <h1><a href="index.html">Glasgow Haskell Compiler User's Guide</a></h1>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="shared_libs.html" title="7.12. Using shared libraries"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="codegens.html" title="7.10. GHC Backends"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GHC 8.5.20180310 User&#39;s Guide</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="usage.html" accesskey="U">7. Using GHC</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.11. Options related to a particular phase</a><ul>
<li><a class="reference internal" href="#replacing-the-program-for-one-or-more-phases">7.11.1. Replacing the program for one or more phases</a></li>
<li><a class="reference internal" href="#forcing-options-to-a-particular-phase">7.11.2. Forcing options to a particular phase</a></li>
<li><a class="reference internal" href="#options-affecting-the-c-pre-processor">7.11.3. Options affecting the C pre-processor</a><ul>
<li><a class="reference internal" href="#standard-cpp-macros">7.11.3.1. Standard CPP macros</a></li>
<li><a class="reference internal" href="#cpp-and-string-gaps">7.11.3.2. CPP and string gaps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#options-affecting-a-haskell-pre-processor">7.11.4. Options affecting a Haskell pre-processor</a></li>
<li><a class="reference internal" href="#options-affecting-code-generation">7.11.5. Options affecting code generation</a></li>
<li><a class="reference internal" href="#options-affecting-linking">7.11.6. Options affecting linking</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="codegens.html"
                        title="previous chapter">7.10. GHC Backends</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="shared_libs.html"
                        title="next chapter">7.12. Using shared libraries</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/phases.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="options-related-to-a-particular-phase">
<span id="options-phases"></span><h1>7.11. Options related to a particular phase<a class="headerlink" href="#options-related-to-a-particular-phase" title="Permalink to this headline">¶</a></h1>
<div class="section" id="replacing-the-program-for-one-or-more-phases">
<span id="replacing-phases"></span><h2>7.11.1. Replacing the program for one or more phases<a class="headerlink" href="#replacing-the-program-for-one-or-more-phases" title="Permalink to this headline">¶</a></h2>
<p id="index-0">You may specify that a different program be used for one of the phases
of the compilation system, in place of whatever the <code class="docutils literal"><span class="pre">ghc</span></code> has wired
into it. For example, you might want to try a different assembler. The
following options allow you to change the external program used for a
given compilation phase:</p>
<dl class="ghc-flag">
<dt id="ghc-flag--pgmL ⟨cmd⟩">
<code class="descname">-pgmL</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmL ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the literate pre-processor.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmP ⟨cmd⟩">
<code class="descname">-pgmP</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmP ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the C pre-processor (with <code class="docutils literal"><span class="pre">-cpp</span></code> only).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmc ⟨cmd⟩">
<code class="descname">-pgmc</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmc ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the C compiler.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmlo ⟨cmd⟩">
<code class="descname">-pgmlo</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmlo ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the LLVM optimiser.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmlc ⟨cmd⟩">
<code class="descname">-pgmlc</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmlc ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the LLVM compiler.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgms ⟨cmd⟩">
<code class="descname">-pgms</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgms ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the splitter.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgma ⟨cmd⟩">
<code class="descname">-pgma</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgma ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the assembler.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgml ⟨cmd⟩">
<code class="descname">-pgml</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgml ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the linker.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmdll ⟨cmd⟩">
<code class="descname">-pgmdll</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmdll ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the DLL generator.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmF ⟨cmd⟩">
<code class="descname">-pgmF</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmF ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the pre-processor (with <code class="docutils literal"><span class="pre">-F</span></code> only).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmwindres ⟨cmd⟩">
<code class="descname">-pgmwindres</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmwindres ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the program to use for embedding manifests on Windows.
Normally this is the program <code class="docutils literal"><span class="pre">windres</span></code>, which is supplied with a
GHC installation. See <code class="docutils literal"><span class="pre">-fno-embed-manifest</span></code> in
<a class="reference internal" href="#options-linker"><span class="std std-ref">Options affecting linking</span></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmlibtool ⟨cmd⟩">
<code class="descname">-pgmlibtool</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmlibtool ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the libtool command (when using <code class="docutils literal"><span class="pre">-staticlib</span></code> only).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pgmi ⟨cmd⟩">
<code class="descname">-pgmi</code><code class="descclassname"> ⟨cmd⟩</code><a class="headerlink" href="#ghc-flag--pgmi ⟨cmd⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Use ⟨cmd⟩ as the external interpreter command (see:
<a class="reference internal" href="ghci.html#external-interpreter"><span class="std std-ref">Running the interpreter in a separate process</span></a>).  Default: <code class="docutils literal"><span class="pre">ghc-iserv-prof</span></code> if
<code class="docutils literal"><span class="pre">-prof</span></code> is enabled, <code class="docutils literal"><span class="pre">ghc-iserv-dyn</span></code> if <code class="docutils literal"><span class="pre">-dynamic</span></code> is
enabled, or <code class="docutils literal"><span class="pre">ghc-iserv</span></code> otherwise.</p>
</dd></dl>

</div>
<div class="section" id="forcing-options-to-a-particular-phase">
<span id="forcing-options-through"></span><h2>7.11.2. Forcing options to a particular phase<a class="headerlink" href="#forcing-options-to-a-particular-phase" title="Permalink to this headline">¶</a></h2>
<p id="index-1">Options can be forced through to a particular compilation phase, using
the following flags:</p>
<dl class="ghc-flag">
<dt id="ghc-flag--optL ⟨option⟩">
<code class="descname">-optL</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optL ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the literate pre-processor</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optP ⟨option⟩">
<code class="descname">-optP</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optP ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to CPP (makes sense only if <code class="docutils literal"><span class="pre">-cpp</span></code> is also on).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optF ⟨option⟩">
<code class="descname">-optF</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optF ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the custom pre-processor (see
<a class="reference internal" href="#pre-processor"><span class="std std-ref">Options affecting a Haskell pre-processor</span></a>).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optc ⟨option⟩">
<code class="descname">-optc</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optc ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the C compiler.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optlo ⟨option⟩">
<code class="descname">-optlo</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optlo ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the LLVM optimiser.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optlc ⟨option⟩">
<code class="descname">-optlc</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optlc ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the LLVM compiler.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--opta ⟨option⟩">
<code class="descname">-opta</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--opta ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the assembler.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optl ⟨option⟩">
<code class="descname">-optl</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optl ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the linker.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optdll ⟨option⟩">
<code class="descname">-optdll</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optdll ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the DLL generator.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--optwindres ⟨option⟩">
<code class="descname">-optwindres</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--optwindres ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to <code class="docutils literal"><span class="pre">windres</span></code> when embedding manifests on Windows.
See <code class="docutils literal"><span class="pre">-fno-embed-manifest</span></code> in <a class="reference internal" href="#options-linker"><span class="std std-ref">Options affecting linking</span></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--opti ⟨option⟩">
<code class="descname">-opti</code><code class="descclassname"> ⟨option⟩</code><a class="headerlink" href="#ghc-flag--opti ⟨option⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass ⟨option⟩ to the interpreter sub-process (see
<a class="reference internal" href="ghci.html#external-interpreter"><span class="std std-ref">Running the interpreter in a separate process</span></a>).  A common use for this is to pass
RTS options e.g., <code class="docutils literal"><span class="pre">-opti+RTS</span> <span class="pre">-opti-A64m</span></code>, or to enable verbosity
with <code class="docutils literal"><span class="pre">-opti-v</span></code> to see what messages are being exchanged by GHC
and the interpreter.</p>
</dd></dl>

<p>So, for example, to force an <code class="docutils literal"><span class="pre">-Ewurble</span></code> option to the assembler, you
would tell the driver <code class="docutils literal"><span class="pre">-opta-Ewurble</span></code> (the dash before the E is
required).</p>
<p>GHC is itself a Haskell program, so if you need to pass options directly
to GHC’s runtime system you can enclose them in <code class="docutils literal"><span class="pre">+RTS</span> <span class="pre">...</span> <span class="pre">-RTS</span></code> (see
<a class="reference internal" href="runtime_control.html#runtime-control"><span class="std std-ref">Running a compiled program</span></a>).</p>
</div>
<div class="section" id="options-affecting-the-c-pre-processor">
<span id="c-pre-processor"></span><h2>7.11.3. Options affecting the C pre-processor<a class="headerlink" href="#options-affecting-the-c-pre-processor" title="Permalink to this headline">¶</a></h2>
<dl class="extension">
<dt id="extension-CPP">
<span id="ghc-flag--XCPP"></span><span id="extension-NoCPP"></span><code class="descname">CPP</code><a class="headerlink" href="#extension-CPP" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Since:</th><td class="field-body">6.8.1</td>
</tr>
</tbody>
</table>
</dd></dl>

<span class="target" id="index-2"></span><dl class="ghc-flag">
<dt id="ghc-flag--cpp">
<code class="descname">-cpp</code><a class="headerlink" href="#ghc-flag--cpp" title="Permalink to this definition">¶</a></dt>
<dd><p>The C pre-processor <strong class="command">cpp</strong> is run over your Haskell code only if
the <code class="docutils literal"><span class="pre">-cpp</span></code> option -cpp option is given. Unless you are building a
large system with significant doses of conditional compilation, you
really shouldn’t need it.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--D⟨symbol⟩[=⟨value⟩]">
<code class="descname">-D⟨symbol⟩</code><code class="descclassname">[=⟨value⟩]</code><a class="headerlink" href="#ghc-flag--D⟨symbol⟩[=⟨value⟩]" title="Permalink to this definition">¶</a></dt>
<dd><p>Define macro ⟨symbol⟩ in the usual way. When no value is given, the value is
taken to be <code class="docutils literal"><span class="pre">1</span></code>. For instance, <code class="docutils literal"><span class="pre">-DUSE_MYLIB</span></code> is equivalent to
<code class="docutils literal"><span class="pre">-DUSE_MYLIB=1</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#ghc-flag--D⟨symbol⟩[=⟨value⟩]"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-D⟨symbol⟩[=⟨value⟩]</span></code></a> does <em>not</em> affect <code class="docutils literal"><span class="pre">-D</span></code>
macros passed to the C&nbsp;compiler when compiling an unregisterised build! In
this case use the <code class="docutils literal"><span class="pre">-optc-Dfoo</span></code> hack… (see <a class="reference internal" href="#forcing-options-through"><span class="std std-ref">Forcing options to a particular phase</span></a>).</p>
</div>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--U⟨symbol⟩">
<code class="descname">-U⟨symbol⟩</code><a class="headerlink" href="#ghc-flag--U⟨symbol⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Undefine macro ⟨symbol⟩ in the usual way.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--I⟨dir⟩">
<code class="descname">-I⟨dir⟩</code><a class="headerlink" href="#ghc-flag--I⟨dir⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a directory in which to look for <code class="docutils literal"><span class="pre">#include</span></code> files, in the
usual C way.</p>
</dd></dl>

<p>The GHC driver pre-defines several macros when processing Haskell source
code (<code class="docutils literal"><span class="pre">.hs</span></code> or <code class="docutils literal"><span class="pre">.lhs</span></code> files).</p>
<div class="section" id="standard-cpp-macros">
<span id="id1"></span><h3>7.11.3.1. Standard CPP macros<a class="headerlink" href="#standard-cpp-macros" title="Permalink to this headline">¶</a></h3>
<p>The symbols defined by GHC are listed below. To check which symbols are
defined by your local GHC installation, the following trick is useful:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span>$ ghc -E -optP-dM -cpp foo.hs
$ cat foo.hspp
</pre></div>
</div>
<p>(you need a file <code class="docutils literal"><span class="pre">foo.hs</span></code>, but it isn’t actually used).</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">__GLASGOW_HASKELL__</span></code></dt>
<dd><p class="first" id="index-3">For version <code class="docutils literal"><span class="pre">x.y.z</span></code> of GHC, the value of <code class="docutils literal"><span class="pre">__GLASGOW_HASKELL__</span></code>
is the integer ⟨xyy⟩ (if ⟨y⟩ is a single digit, then a leading zero
is added, so for example in version 6.2 of GHC,
<code class="docutils literal"><span class="pre">__GLASGOW_HASKELL__==602</span></code>). More information in
<a class="reference internal" href="intro.html#version-numbering"><span class="std std-ref">GHC version numbering policy</span></a>.</p>
<p>With any luck, <code class="docutils literal"><span class="pre">__GLASGOW_HASKELL__</span></code> will be undefined in all
other implementations that support C-style pre-processing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The comparable symbols for other systems are:
<code class="docutils literal"><span class="pre">__HUGS__</span></code> for Hugs, <code class="docutils literal"><span class="pre">__NHC__</span></code> for nhc98, and <code class="docutils literal"><span class="pre">__HBC__</span></code> for
hbc).</p>
</div>
<p class="last">NB. This macro is set when pre-processing both Haskell source and C
source, including the C source generated from a Haskell module (i.e.
<code class="docutils literal"><span class="pre">.hs</span></code>, <code class="docutils literal"><span class="pre">.lhs</span></code>, <code class="docutils literal"><span class="pre">.c</span></code> and <code class="docutils literal"><span class="pre">.hc</span></code> files).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_PATCHLEVEL1__</span></code>; <code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_PATCHLEVEL2__</span></code></dt>
<dd><span class="target" id="index-4"></span><p class="first" id="index-5">These macros are available starting with GHC 7.10.1.</p>
<p>For three-part GHC version numbers <code class="docutils literal"><span class="pre">x.y.z</span></code>, the value of
<code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_PATCHLEVEL1__</span></code> is the integer ⟨z⟩.</p>
<p>For four-part GHC version numbers <code class="docutils literal"><span class="pre">x.y.z.z'</span></code>, the value of
<code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_PATCHLEVEL1__</span></code> is the integer ⟨z⟩ while the
value of <code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_PATCHLEVEL2__</span></code> is set to the integer
⟨z’⟩.</p>
<p>These macros are provided for allowing finer granularity than is
provided by <code class="docutils literal"><span class="pre">__GLASGOW_HASKELL__</span></code>. Usually, this should not be
necessary as it’s expected for most APIs to remain stable between
patchlevel releases, but occasionally internal API changes are
necessary to fix bugs. Also conditional compilation on the
patchlevel can be useful for working around bugs in older releases.</p>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">These macros are set when pre-processing both Haskell source and
C source, including the C source generated from a Haskell module
(i.e. <code class="docutils literal"><span class="pre">.hs</span></code>, <code class="docutils literal"><span class="pre">.lhs</span></code>, <code class="docutils literal"><span class="pre">.c</span></code> and <code class="docutils literal"><span class="pre">.hc</span></code> files).</p>
</div>
</dd>
<dt><code class="docutils literal"><span class="pre">MIN_VERSION_GLASGOW_HASKELL(x,y,z,z')</span></code></dt>
<dd><p class="first" id="index-6">This macro is available starting with GHC 7.10.1.</p>
<p>This macro is provided for convenience to write CPP conditionals
testing whether the GHC version used is version <code class="docutils literal"><span class="pre">x.y.z.z'</span></code> or
later.</p>
<p>If compatibility with Haskell compilers (including GHC prior to
version 7.10.1) which do not define <code class="docutils literal"><span class="pre">MIN_VERSION_GLASGOW_HASKELL</span></code>
is required, the presence of the <code class="docutils literal"><span class="pre">MIN_VERSION_GLASGOW_HASKELL</span></code>
macro needs to be ensured before it is called, e.g.:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="cp">#ifdef MIN_VERSION_GLASGOW_HASKELL</span>
<span class="cp">#if MIN_VERSION_GLASGOW_HASKELL(7,10,2,0)</span>
<span class="cm">/* code that applies only to GHC 7.10.2 or later */</span>
<span class="cp">#endif</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<div class="last admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">This macro is set when pre-processing both Haskell source and C
source, including the C source generated from a Haskell module (i.e.
<code class="docutils literal"><span class="pre">.hs</span></code>, <code class="docutils literal"><span class="pre">.lhs</span></code>, <code class="docutils literal"><span class="pre">.c</span></code> and <code class="docutils literal"><span class="pre">.hc</span></code> files).</p>
</div>
</dd>
<dt><code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_TH__</span></code></dt>
<dd><p class="first last" id="index-7">This is set to <code class="docutils literal"><span class="pre">1</span></code> when the compiler supports Template Haskell,
and to <code class="docutils literal"><span class="pre">0</span></code> when not. The latter is the case for a stage-1
compiler during bootstrapping, or on architectures where the
interpreter is not available.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_LLVM__</span></code></dt>
<dd><p class="first last" id="index-8">Only defined when <code class="docutils literal"><span class="pre">-fllvm</span></code> is specified. When GHC is using version
<code class="docutils literal"><span class="pre">x.y.z</span></code> of LLVM, the value of <code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_LLVM__</span></code> is the
integer ⟨xyy⟩ (if ⟨y⟩ is a single digit, then a leading zero
is added, so for example when using version 3.7 of LLVM,
<code class="docutils literal"><span class="pre">__GLASGOW_HASKELL_LLVM__==307</span></code>).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">__PARALLEL_HASKELL__</span></code></dt>
<dd><p class="first last" id="index-9">Only defined when <code class="docutils literal"><span class="pre">-parallel</span></code> is in use! This symbol is defined
when pre-processing Haskell (input) and pre-processing C (GHC
output).</p>
</dd>
<dt><code class="docutils literal"><span class="pre">os_HOST_OS=1</span></code></dt>
<dd>This define allows conditional compilation based on the Operating
System, where⟨os⟩ is the name of the current Operating System (eg.
<code class="docutils literal"><span class="pre">linux</span></code>, <code class="docutils literal"><span class="pre">mingw32</span></code> for Windows, <code class="docutils literal"><span class="pre">solaris</span></code>, etc.).</dd>
<dt><code class="docutils literal"><span class="pre">arch_HOST_ARCH=1</span></code></dt>
<dd>This define allows conditional compilation based on the host
architecture, where⟨arch⟩ is the name of the current architecture
(eg. <code class="docutils literal"><span class="pre">i386</span></code>, <code class="docutils literal"><span class="pre">x86_64</span></code>, <code class="docutils literal"><span class="pre">powerpc</span></code>, <code class="docutils literal"><span class="pre">sparc</span></code>, etc.).</dd>
<dt><code class="docutils literal"><span class="pre">VERSION_pkgname</span></code></dt>
<dd>This macro is available starting GHC 8.0.  It is defined for every
exposed package. This macro expands to a string recording the
version of <code class="docutils literal"><span class="pre">pkgname</span></code> that is exposed for module import.
It is identical in behavior to the <code class="docutils literal"><span class="pre">VERSION_pkgname</span></code> macros
that Cabal defines.</dd>
<dt><code class="docutils literal"><span class="pre">MIN_VERSION_pkgname(x,y,z)</span></code></dt>
<dd>This macro is available starting GHC 8.0.  It is defined for every
exposed package. This macro is provided for convenience to write CPP
conditionals testing if a package version is <code class="docutils literal"><span class="pre">x.y.z</span></code> or
later.  It is identical in behavior to the <code class="docutils literal"><span class="pre">MIN_VERSION_pkgname</span></code>
macros that Cabal defines.</dd>
</dl>
</div>
<div class="section" id="cpp-and-string-gaps">
<span id="cpp-string-gaps"></span><h3>7.11.3.2. CPP and string gaps<a class="headerlink" href="#cpp-and-string-gaps" title="Permalink to this headline">¶</a></h3>
<p id="index-10">A small word of warning: <a class="reference internal" href="#ghc-flag--cpp"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-cpp</span></code></a> is not friendly to “string gaps”.
In other words, strings such as the following:</p>
<div class="highlight-haskell"><div class="highlight"><pre><span></span><span class="nf">strmod</span> <span class="ow">=</span> <span class="s">&quot;</span><span class="se">\</span>
<span class="se">\</span><span class="s"> p </span><span class="se">\</span>
<span class="se">\</span><span class="s"> &quot;</span>
</pre></div>
</div>
<p>don’t work with <a class="reference internal" href="#ghc-flag--cpp"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-cpp</span></code></a>; <strong class="command">/usr/bin/cpp</strong> elides the backslash-newline
pairs.</p>
<p>However, it appears that if you add a space at the end of the line, then
<code class="docutils literal"><span class="pre">cpp</span></code> (at least GNU <code class="docutils literal"><span class="pre">cpp</span></code> and possibly other <code class="docutils literal"><span class="pre">cpp</span></code>s) leaves the
backslash-space pairs alone and the string gap works as expected.</p>
</div>
</div>
<div class="section" id="options-affecting-a-haskell-pre-processor">
<span id="pre-processor"></span><h2>7.11.4. Options affecting a Haskell pre-processor<a class="headerlink" href="#options-affecting-a-haskell-pre-processor" title="Permalink to this headline">¶</a></h2>
<span class="target" id="index-11"></span><dl class="ghc-flag">
<dt id="ghc-flag--F">
<code class="descname">-F</code><a class="headerlink" href="#ghc-flag--F" title="Permalink to this definition">¶</a></dt>
<dd><p>A custom pre-processor is run over your Haskell source file only if
the <code class="docutils literal"><span class="pre">-F</span></code> option is given.</p>
<p>Running a custom pre-processor at compile-time is in some settings
appropriate and useful. The <code class="docutils literal"><span class="pre">-F</span></code> option lets you run a
pre-processor as part of the overall GHC compilation pipeline, which
has the advantage over running a Haskell pre-processor separately in
that it works in interpreted mode and you can continue to take reap
the benefits of GHC’s recompilation checker.</p>
<p>The pre-processor is run just before the Haskell compiler proper
processes the Haskell input, but after the literate markup has been
stripped away and (possibly) the C pre-processor has washed the
Haskell input.</p>
<p>Use <a class="reference internal" href="#ghc-flag--pgmF ⟨cmd⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-pgmF</span> <span class="pre">⟨cmd⟩</span></code></a> to select the program to use as the
preprocessor.  When invoked, the ⟨cmd⟩ pre-processor is given at least
three arguments on its command-line: the first argument is the name of the
original source file, the second is the name of the file holding the input,
and the third is the name of the file where ⟨cmd⟩ should write its output
to.</p>
<p>Additional arguments to the pre-processor can be passed in using the
<a class="reference internal" href="#ghc-flag--optF ⟨option⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-optF</span> <span class="pre">⟨option⟩</span></code></a> option. These are fed to ⟨cmd⟩ on the command
line after the three standard input and output arguments.</p>
<p>An example of a pre-processor is to convert your source files to the
input encoding that GHC expects, i.e. create a script <code class="docutils literal"><span class="pre">convert.sh</span></code>
containing the lines:</p>
<div class="highlight-sh"><div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot;{-# LINE 1 \&quot;</span><span class="nv">$2</span><span class="s2">\&quot; #-}&quot;</span> <span class="p">;</span> iconv -f l1 -t utf-8 <span class="nv">$2</span> <span class="o">)</span> &gt; <span class="nv">$3</span>
</pre></div>
</div>
<p>and pass <code class="docutils literal"><span class="pre">-F</span> <span class="pre">-pgmF</span> <span class="pre">convert.sh</span></code> to GHC. The <code class="docutils literal"><span class="pre">-f</span> <span class="pre">l1</span></code> option tells
iconv to convert your Latin-1 file, supplied in argument <code class="docutils literal"><span class="pre">$2</span></code>,
while the “-t utf-8” options tell iconv to return a UTF-8 encoded
file. The result is redirected into argument <code class="docutils literal"><span class="pre">$3</span></code>. The
<code class="docutils literal"><span class="pre">echo</span> <span class="pre">&quot;{-#</span> <span class="pre">LINE</span> <span class="pre">1</span> <span class="pre">\&quot;$2\&quot;</span> <span class="pre">#-}&quot;</span></code> just makes sure that your error
positions are reported as in the original source file.</p>
</dd></dl>

</div>
<div class="section" id="options-affecting-code-generation">
<span id="options-codegen"></span><h2>7.11.5. Options affecting code generation<a class="headerlink" href="#options-affecting-code-generation" title="Permalink to this headline">¶</a></h2>
<dl class="ghc-flag">
<dt id="ghc-flag--fasm">
<code class="descname">-fasm</code><a class="headerlink" href="#ghc-flag--fasm" title="Permalink to this definition">¶</a></dt>
<dd><p>Use GHC’s <a class="reference internal" href="codegens.html#native-code-gen"><span class="std std-ref">native code generator</span></a> rather than
compiling via LLVM. <code class="docutils literal"><span class="pre">-fasm</span></code> is the default.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fllvm">
<code class="descname">-fllvm</code><a class="headerlink" href="#ghc-flag--fllvm" title="Permalink to this definition">¶</a></dt>
<dd><p>Compile via <a class="reference internal" href="codegens.html#llvm-code-gen"><span class="std std-ref">LLVM</span></a> instead of using the native
code generator. This will generally take slightly longer than the
native code generator to compile. Produced code is generally the
same speed or faster than the other two code generators. Compiling
via LLVM requires LLVM’s <strong class="command">opt</strong> and <strong class="command">llc</strong> executables to be
in <span class="target" id="index-12"></span><code class="xref std std-envvar docutils literal"><span class="pre">PATH</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that this GHC release expects an LLVM version in the 5.0
release series.</p>
</div>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fno-code">
<code class="descname">-fno-code</code><a class="headerlink" href="#ghc-flag--fno-code" title="Permalink to this definition">¶</a></dt>
<dd><p>Omit code generation (and all later phases) altogether. This is
useful if you’re only interested in type checking code.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fwrite-interface">
<code class="descname">-fwrite-interface</code><a class="headerlink" href="#ghc-flag--fwrite-interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Always write interface files. GHC will normally write interface
files automatically, but this flag is useful with <a class="reference internal" href="#ghc-flag--fno-code"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fno-code</span></code></a>,
which normally suppresses generation of interface files. This is
useful if you want to type check over multiple runs of GHC without
compiling dependencies.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fobject-code">
<code class="descname">-fobject-code</code><a class="headerlink" href="#ghc-flag--fobject-code" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate object code. This is the default outside of GHCi, and can
be used with GHCi to cause object code to be generated in preference
to bytecode.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fbyte-code">
<code class="descname">-fbyte-code</code><a class="headerlink" href="#ghc-flag--fbyte-code" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate byte-code instead of object-code. This is the default in
GHCi. Byte-code can currently only be used in the interactive
interpreter, not saved to disk. This option is only useful for
reversing the effect of <a class="reference internal" href="#ghc-flag--fobject-code"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fobject-code</span></code></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fPIC">
<code class="descname">-fPIC</code><a class="headerlink" href="#ghc-flag--fPIC" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate position-independent code (code that can be put into shared
libraries). This currently works on Linux x86 and x86-64. On
Windows, position-independent code is never used so the flag is a
no-op on that platform.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fexternal-dynamic-refs">
<code class="descname">-fexternal-dynamic-refs</code><a class="headerlink" href="#ghc-flag--fexternal-dynamic-refs" title="Permalink to this definition">¶</a></dt>
<dd><p>When generating code, assume that entities imported from a
different module might be dynamically linked.  This flag is enabled
automatically by <a class="reference internal" href="#ghc-flag--dynamic"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-dynamic</span></code></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fPIE">
<code class="descname">-fPIE</code><a class="headerlink" href="#ghc-flag--fPIE" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate code in such a way to be linkable into a position-independent
executable This currently works on Linux x86 and x86-64. On Windows,
position-independent code is never used so the flag is a no-op on that
platform. To link the final executable use <a class="reference internal" href="#ghc-flag--pie"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-pie</span></code></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt>
<code class="descname">-dynamic</code></dt>
<dd><p>Build code for dynamic linking.  This can reduce code size
tremendously, but may slow-down cross-module calls of non-inlined
functions. There can be some complications combining
<a class="reference internal" href="#ghc-flag--shared"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-shared</span></code></a> with this flag relating to linking in the RTS
under Linux. See <a class="reference external" href="https://ghc.haskell.org/trac/ghc/ticket/10352">Trac #10352</a>.</p>
<p>Note that using this option when linking causes GHC to link against
shared libraries.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--dynamic-too">
<code class="descname">-dynamic-too</code><a class="headerlink" href="#ghc-flag--dynamic-too" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates both dynamic and static object files in a single run of
GHC. This option is functionally equivalent to running GHC twice,
the second time adding <code class="docutils literal"><span class="pre">-dynamic</span> <span class="pre">-osuf</span> <span class="pre">dyn_o</span> <span class="pre">-hisuf</span> <span class="pre">dyn_hi</span></code>.</p>
<p>Although it is equivalent to running GHC twice, using
<code class="docutils literal"><span class="pre">-dynamic-too</span></code> is more efficient, because the earlier phases of
the compiler up to code generation are performed just once.</p>
<p>When using <code class="docutils literal"><span class="pre">-dynamic-too</span></code>, the options <code class="docutils literal"><span class="pre">-dyno</span></code>, <code class="docutils literal"><span class="pre">-dynosuf</span></code>,
and <code class="docutils literal"><span class="pre">-dynhisuf</span></code> are the counterparts of <code class="docutils literal"><span class="pre">-o</span></code>, <code class="docutils literal"><span class="pre">-osuf</span></code>, and
<code class="docutils literal"><span class="pre">-hisuf</span></code> respectively, but applying to the dynamic compilation.</p>
</dd></dl>

</div>
<div class="section" id="options-affecting-linking">
<span id="options-linker"></span><h2>7.11.6. Options affecting linking<a class="headerlink" href="#options-affecting-linking" title="Permalink to this headline">¶</a></h2>
<p id="index-13">GHC has to link your code with various libraries, possibly including:
user-supplied, GHC-supplied, and system-supplied (<code class="docutils literal"><span class="pre">-lm</span></code> math library,
for example).</p>
<dl class="ghc-flag">
<dt id="ghc-flag--l ⟨lib⟩">
<code class="descname">-l</code><code class="descclassname"> ⟨lib⟩</code><a class="headerlink" href="#ghc-flag--l ⟨lib⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Link in the ⟨lib⟩ library. On Unix systems, this will be in a file
called <code class="file docutils literal"><span class="pre">lib</span><em><span class="pre">lib</span></em><span class="pre">.a</span></code> or <code class="file docutils literal"><span class="pre">lib</span><em><span class="pre">lib</span></em><span class="pre">.so</span></code> which resides somewhere on the
library directories path.</p>
<p>Because of the sad state of most UNIX linkers, the order of such
options does matter. If library ⟨foo⟩ requires library ⟨bar⟩, then
in general <code class="docutils literal"><span class="pre">-l</span> <span class="pre">⟨foo⟩</span></code> should come <em>before</em> <code class="docutils literal"><span class="pre">-l</span> <span class="pre">⟨bar⟩</span></code> on the
command line.</p>
<p>There’s one other gotcha to bear in mind when using external
libraries: if the library contains a <code class="docutils literal"><span class="pre">main()</span></code> function, then this
will be a link conflict with GHC’s own <code class="docutils literal"><span class="pre">main()</span></code> function (eg.
<code class="docutils literal"><span class="pre">libf2c</span></code> and <code class="docutils literal"><span class="pre">libl</span></code> have their own <code class="docutils literal"><span class="pre">main()</span></code>s).</p>
<p>You can use an external main function if you initialize the RTS manually
and pass <code class="docutils literal"><span class="pre">-no-hs-main</span></code>. See also <a class="reference internal" href="ffi-chap.html#using-own-main"><span class="std std-ref">Using your own main()</span></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--c">
<code class="descname">-c</code><a class="headerlink" href="#ghc-flag--c" title="Permalink to this definition">¶</a></dt>
<dd><p>Omits the link step. This option can be used with <a class="reference internal" href="using.html#ghc-flag---make"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--make</span></code></a> to
avoid the automatic linking that takes place if the program contains
a <code class="docutils literal"><span class="pre">Main</span></code> module.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--package ⟨name⟩">
<code class="descname">-package</code><code class="descclassname"> ⟨name⟩</code><a class="headerlink" href="#ghc-flag--package ⟨name⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>If you are using a Haskell “package” (see <a class="reference internal" href="packages.html#packages"><span class="std std-ref">Packages</span></a>), don’t
forget to add the relevant <code class="docutils literal"><span class="pre">-package</span></code> option when linking the
program too: it will cause the appropriate libraries to be linked in
with the program. Forgetting the <code class="docutils literal"><span class="pre">-package</span></code> option will likely
result in several pages of link errors.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--framework ⟨name⟩">
<code class="descname">-framework</code><code class="descclassname"> ⟨name⟩</code><a class="headerlink" href="#ghc-flag--framework ⟨name⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>On Darwin/OS X/iOS only, link in the framework ⟨name⟩. This option
corresponds to the <code class="docutils literal"><span class="pre">-framework</span></code> option for Apple’s Linker. Please
note that frameworks and packages are two different things -
frameworks don’t contain any Haskell code. Rather, they are Apple’s
way of packaging shared libraries. To link to Apple’s “Carbon” API,
for example, you’d use <code class="docutils literal"><span class="pre">-framework</span> <span class="pre">Carbon</span></code>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--staticlib">
<code class="descname">-staticlib</code><a class="headerlink" href="#ghc-flag--staticlib" title="Permalink to this definition">¶</a></dt>
<dd><p>Link all passed files into a static library suitable for linking.
To control the name, use the <a class="reference internal" href="separate_compilation.html#ghc-flag--o ⟨file⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-o</span> <span class="pre">⟨file⟩</span></code></a> option
as usual. The default name is <code class="docutils literal"><span class="pre">liba.a</span></code>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--L ⟨dir⟩">
<code class="descname">-L</code><code class="descclassname"> ⟨dir⟩</code><a class="headerlink" href="#ghc-flag--L ⟨dir⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>Where to find user-supplied libraries… Prepend the directory ⟨dir⟩
to the library directories path.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--framework-path ⟨dir⟩">
<code class="descname">-framework-path</code><code class="descclassname"> ⟨dir⟩</code><a class="headerlink" href="#ghc-flag--framework-path ⟨dir⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>On Darwin/OS X/iOS only, prepend the directory ⟨dir⟩ to the
framework directories path. This option corresponds to the <code class="docutils literal"><span class="pre">-F</span></code>
option for Apple’s Linker (<code class="docutils literal"><span class="pre">-F</span></code> already means something else for
GHC).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--split-objs">
<code class="descname">-split-objs</code><a class="headerlink" href="#ghc-flag--split-objs" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the linker to split the single object file that would normally
be generated into multiple object files, one per top-level Haskell
function or type in the module. This only makes sense for libraries,
where it means that executables linked against the library are
smaller as they only link against the object files that they need.
However, assembling all the sections separately is expensive, so
this is slower than compiling normally. Additionally, the size of
the library itself (the <code class="docutils literal"><span class="pre">.a</span></code> file) can be a factor of 2 to 2.5
larger. We use this feature for building GHC’s libraries.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--split-sections">
<code class="descname">-split-sections</code><a class="headerlink" href="#ghc-flag--split-sections" title="Permalink to this definition">¶</a></dt>
<dd><p>Place each generated function or data item into its own section in the
output file if the target supports arbitrary sections. The name of the
function or the name of the data item determines the section’s name in the
output file.</p>
<p>When linking, the linker can automatically remove all unreferenced sections
and thus produce smaller executables. The effect is similar to
<a class="reference internal" href="#ghc-flag--split-objs"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-split-objs</span></code></a>, but somewhat more efficient - the generated library
files are about 30% smaller than with <a class="reference internal" href="#ghc-flag--split-objs"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-split-objs</span></code></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--static">
<code class="descname">-static</code><a class="headerlink" href="#ghc-flag--static" title="Permalink to this definition">¶</a></dt>
<dd><p>Tell the linker to avoid shared Haskell libraries, if possible. This
is the default.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--dynamic">
<code class="descname">-dynamic</code><a class="headerlink" href="#ghc-flag--dynamic" title="Permalink to this definition">¶</a></dt>
<dd><p>This flag tells GHC to link against shared Haskell libraries. This
flag only affects the selection of dependent libraries, not the form
of the current target (see -shared). See <a class="reference internal" href="shared_libs.html#using-shared-libs"><span class="std std-ref">Using shared libraries</span></a> on
how to create them.</p>
<p>Note that this option also has an effect on code generation (see
above).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--shared">
<code class="descname">-shared</code><a class="headerlink" href="#ghc-flag--shared" title="Permalink to this definition">¶</a></dt>
<dd><p>Instead of creating an executable, GHC produces a shared object with
this linker flag. Depending on the operating system target, this
might be an ELF DSO, a Windows DLL, or a Mac OS dylib. GHC hides the
operating system details beneath this uniform flag.</p>
<p>The flags <a class="reference internal" href="#ghc-flag--dynamic"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-dynamic</span></code></a> and <a class="reference internal" href="#ghc-flag--static"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-static</span></code></a> control whether the
resulting shared object links statically or dynamically to Haskell package
libraries given as <a class="reference internal" href="packages.html#ghc-flag--package ⟨pkg⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-package</span> <span class="pre">⟨pkg⟩</span></code></a> option. Non-Haskell libraries
are linked as gcc would regularly link it on your system, e.g. on most ELF
system the linker uses the dynamic libraries when found.</p>
<p>Object files linked into shared objects must be compiled with
<a class="reference internal" href="#ghc-flag--fPIC"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fPIC</span></code></a>, see <a class="reference internal" href="#options-codegen"><span class="std std-ref">Options affecting code generation</span></a></p>
<p>When creating shared objects for Haskell packages, the shared object
must be named properly, so that GHC recognizes the shared object
when linked against this package. See shared object name mangling.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--dynload">
<code class="descname">-dynload</code><a class="headerlink" href="#ghc-flag--dynload" title="Permalink to this definition">¶</a></dt>
<dd><p>This flag selects one of a number of modes for finding shared
libraries at runtime. See <a class="reference internal" href="shared_libs.html#finding-shared-libs"><span class="std std-ref">Finding shared libraries at runtime</span></a> for a
description of each mode.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--main-is ⟨thing⟩">
<code class="descname">-main-is</code><code class="descclassname"> ⟨thing⟩</code><a class="headerlink" href="#ghc-flag--main-is ⟨thing⟩" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-14">The normal rule in Haskell is that your program must supply a
<code class="docutils literal"><span class="pre">main</span></code> function in module <code class="docutils literal"><span class="pre">Main</span></code>. When testing, it is often
convenient to change which function is the “main” one, and the
<code class="docutils literal"><span class="pre">-main-is</span></code> flag allows you to do so. The ⟨thing⟩ can be one of:</p>
<ul class="simple">
<li>A lower-case identifier <code class="docutils literal"><span class="pre">foo</span></code>. GHC assumes that the main
function is <code class="docutils literal"><span class="pre">Main.foo</span></code>.</li>
<li>A module name <code class="docutils literal"><span class="pre">A</span></code>. GHC assumes that the main function is
<code class="docutils literal"><span class="pre">A.main</span></code>.</li>
<li>A qualified name <code class="docutils literal"><span class="pre">A.foo</span></code>. GHC assumes that the main function is
<code class="docutils literal"><span class="pre">A.foo</span></code>.</li>
</ul>
<p>Strictly speaking, <code class="docutils literal"><span class="pre">-main-is</span></code> is not a link-phase flag at all; it
has no effect on the link step. The flag must be specified when
compiling the module containing the specified main function (e.g.
module <code class="docutils literal"><span class="pre">A</span></code> in the latter two items above). It has no effect for
other modules, and hence can safely be given to <code class="docutils literal"><span class="pre">ghc</span> <span class="pre">--make</span></code>.
However, if all the modules are otherwise up to date, you may need
to force recompilation both of the module where the new “main” is,
and of the module where the “main” function used to be; <code class="docutils literal"><span class="pre">ghc</span></code> is
not clever enough to figure out that they both need recompiling. You
can force recompilation by removing the object file, or by using the
<a class="reference internal" href="separate_compilation.html#ghc-flag--fforce-recomp"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fforce-recomp</span></code></a> flag.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--no-hs-main">
<code class="descname">-no-hs-main</code><a class="headerlink" href="#ghc-flag--no-hs-main" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-15">In the event you want to include ghc-compiled code as part of
another (non-Haskell) program, the RTS will not be supplying its
definition of <code class="docutils literal"><span class="pre">main()</span></code> at link-time, you will have to. To signal
that to the compiler when linking, use <code class="docutils literal"><span class="pre">-no-hs-main</span></code>. See also
<a class="reference internal" href="ffi-chap.html#using-own-main"><span class="std std-ref">Using your own main()</span></a>.</p>
<p>Notice that since the command-line passed to the linker is rather
involved, you probably want to use <code class="docutils literal"><span class="pre">ghc</span></code> to do the final link of
your `mixed-language’ application. This is not a requirement
though, just try linking once with <a class="reference internal" href="using.html#ghc-flag--v"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-v</span></code></a> on to see what options the
driver passes through to the linker.</p>
<p>The <code class="docutils literal"><span class="pre">-no-hs-main</span></code> flag can also be used to persuade the compiler
to do the link step in <a class="reference internal" href="using.html#ghc-flag---make"><code class="xref std std-ghc-flag docutils literal"><span class="pre">--make</span></code></a> mode when there is no Haskell
<code class="docutils literal"><span class="pre">Main</span></code> module present (normally the compiler will not attempt
linking when there is no <code class="docutils literal"><span class="pre">Main</span></code>).</p>
<p>The flags <a class="reference internal" href="#ghc-flag--rtsopts[=⟨none|some|all⟩]"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-rtsopts[=⟨none|some|all⟩]</span></code></a> and
<a class="reference internal" href="#ghc-flag--with-rtsopts=⟨opts⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-with-rtsopts=⟨opts⟩</span></code></a> have no effect when used with
<a class="reference internal" href="#ghc-flag--no-hs-main"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-no-hs-main</span></code></a>, because they are implemented by changing the
definition of <code class="docutils literal"><span class="pre">main</span></code> that GHC generates. See <a class="reference internal" href="ffi-chap.html#using-own-main"><span class="std std-ref">Using your own main()</span></a> for
how to get the effect of <a class="reference internal" href="#ghc-flag--rtsopts[=⟨none|some|all⟩]"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-rtsopts[=⟨none|some|all⟩]</span></code></a> and
<a class="reference internal" href="#ghc-flag--with-rtsopts=⟨opts⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-with-rtsopts=⟨opts⟩</span></code></a> when using your own <code class="docutils literal"><span class="pre">main</span></code>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--debug">
<code class="descname">-debug</code><a class="headerlink" href="#ghc-flag--debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Link the program with a debugging version of the runtime system. The
debugging runtime turns on numerous assertions and sanity checks,
and provides extra options for producing debugging output at runtime
(run the program with <code class="docutils literal"><span class="pre">+RTS</span> <span class="pre">-?</span></code> to see a list).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--threaded">
<code class="descname">-threaded</code><a class="headerlink" href="#ghc-flag--threaded" title="Permalink to this definition">¶</a></dt>
<dd><p>Link the program with the “threaded” version of the runtime system.
The threaded runtime system is so-called because it manages multiple
OS threads, as opposed to the default runtime system which is purely
single-threaded.</p>
<p>Note that you do <em>not</em> need <code class="docutils literal"><span class="pre">-threaded</span></code> in order to use
concurrency; the single-threaded runtime supports concurrency
between Haskell threads just fine.</p>
<p>The threaded runtime system provides the following benefits:</p>
<ul class="simple">
<li>It enables the <a class="reference internal" href="using-concurrent.html#rts-flag--N ⟨x⟩"><code class="xref std std-rts-flag docutils literal"><span class="pre">-N</span> <span class="pre">⟨x⟩</span></code></a> RTS option to be used,
which allows threads to run in parallel on a multiprocessor
or multicore machine. See <a class="reference internal" href="using-concurrent.html#using-smp"><span class="std std-ref">Using SMP parallelism</span></a>.</li>
<li>If a thread makes a foreign call (and the call is not marked
<code class="docutils literal"><span class="pre">unsafe</span></code>), then other Haskell threads in the program will
continue to run while the foreign call is in progress.
Additionally, <code class="docutils literal"><span class="pre">foreign</span> <span class="pre">export</span></code>ed Haskell functions may be
called from multiple OS threads simultaneously. See
<a class="reference internal" href="ffi-chap.html#ffi-threads"><span class="std std-ref">Multi-threading and the FFI</span></a>.</li>
</ul>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--eventlog">
<code class="descname">-eventlog</code><a class="headerlink" href="#ghc-flag--eventlog" title="Permalink to this definition">¶</a></dt>
<dd><p>Link the program with the “eventlog” version of the runtime system.
A program linked in this way can generate a runtime trace of events
(such as thread start/stop) to a binary file <code class="file docutils literal"><em><span class="pre">program</span></em><span class="pre">.eventlog</span></code>,
which can then be interpreted later by various tools. See
<a class="reference internal" href="runtime_control.html#rts-eventlog"><span class="std std-ref">Tracing</span></a> for more information.</p>
<p><a class="reference internal" href="#ghc-flag--eventlog"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-eventlog</span></code></a> can be used with <a class="reference internal" href="#ghc-flag--threaded"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-threaded</span></code></a>. It is implied by
<a class="reference internal" href="#ghc-flag--debug"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-debug</span></code></a>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--rtsopts[=⟨none|some|all⟩]">
<code class="descname">-rtsopts</code><code class="descclassname">[=⟨none|some|all⟩]</code><a class="headerlink" href="#ghc-flag--rtsopts[=⟨none|some|all⟩]" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Default:</th><td class="field-body">all</td>
</tr>
</tbody>
</table>
<p>This option affects the processing of RTS control options given
either on the command line or via the <span class="target" id="index-16"></span><a class="reference internal" href="runtime_control.html#envvar-GHCRTS"><code class="xref std std-envvar docutils literal"><span class="pre">GHCRTS</span></code></a> environment
variable. There are three possibilities:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">-rtsopts=none</span></code></dt>
<dd>Disable all processing of RTS options. If <code class="docutils literal"><span class="pre">+RTS</span></code> appears
anywhere on the command line, then the program will abort with
an error message. If the <code class="docutils literal"><span class="pre">GHCRTS</span></code> environment variable is set,
then the program will emit a warning message, <code class="docutils literal"><span class="pre">GHCRTS</span></code> will be
ignored, and the program will run as normal.</dd>
<dt><code class="docutils literal"><span class="pre">-rtsopts=ignore</span></code></dt>
<dd>Disables all processing of RTS options. Unlike <code class="docutils literal"><span class="pre">none</span></code> this treats
all RTS flags appearing on the command line the same way as regular
arguments. (Passing them on to your program as arguments).
<code class="docutils literal"><span class="pre">GHCRTS</span></code> options will be processed normally.</dd>
<dt><code class="docutils literal"><span class="pre">-rtsopts=ignoreAll</span></code></dt>
<dd>Same as <code class="docutils literal"><span class="pre">ignore</span></code> but also ignores <code class="docutils literal"><span class="pre">GHCRTS</span></code>.</dd>
<dt><code class="docutils literal"><span class="pre">-rtsopts=some</span></code></dt>
<dd>[this is the default setting] Enable only the “safe” RTS
options: (Currently only <code class="docutils literal"><span class="pre">-?</span></code> and <code class="docutils literal"><span class="pre">--info</span></code>.) Any other RTS
options on the command line or in the <code class="docutils literal"><span class="pre">GHCRTS</span></code> environment
variable causes the program with to abort with an error message.</dd>
<dt><code class="docutils literal"><span class="pre">-rtsopts=all</span></code> or just <code class="docutils literal"><span class="pre">-rtsopts</span></code></dt>
<dd>Enable <em>all</em> RTS option processing, both on the command line and
through the <code class="docutils literal"><span class="pre">GHCRTS</span></code> environment variable.</dd>
</dl>
<p>In GHC 6.12.3 and earlier, the default was to process all RTS
options. However, since RTS options can be used to write logging
data to arbitrary files under the security context of the running
program, there is a potential security problem. For this reason, GHC
7.0.1 and later default to <code class="docutils literal"><span class="pre">-rtsopts=some</span></code>.</p>
<p>Note that <code class="docutils literal"><span class="pre">-rtsopts</span></code> has no effect when used with <a class="reference internal" href="#ghc-flag--no-hs-main"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-no-hs-main</span></code></a>;
see <a class="reference internal" href="ffi-chap.html#using-own-main"><span class="std std-ref">Using your own main()</span></a> for details.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--with-rtsopts=⟨opts⟩">
<code class="descname">-with-rtsopts</code><code class="descclassname">=⟨opts⟩</code><a class="headerlink" href="#ghc-flag--with-rtsopts=⟨opts⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>This option allows you to set the default RTS options at link-time.
For example, <code class="docutils literal"><span class="pre">-with-rtsopts=&quot;-H128m&quot;</span></code> sets the default heap size
to 128MB. This will always be the default heap size for this
program, unless the user overrides it. (Depending on the setting of
the <code class="docutils literal"><span class="pre">-rtsopts</span></code> option, the user might not have the ability to
change RTS options at run-time, in which case <code class="docutils literal"><span class="pre">-with-rtsopts</span></code>
would be the <em>only</em> way to set them.)</p>
<p>Note that <code class="docutils literal"><span class="pre">-with-rtsopts</span></code> has no effect when used with
<code class="docutils literal"><span class="pre">-no-hs-main</span></code>; see <a class="reference internal" href="ffi-chap.html#using-own-main"><span class="std std-ref">Using your own main()</span></a> for details.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--no-rtsopts-suggestions">
<code class="descname">-no-rtsopts-suggestions</code><a class="headerlink" href="#ghc-flag--no-rtsopts-suggestions" title="Permalink to this definition">¶</a></dt>
<dd><p>This option disables RTS suggestions about linking with
<a class="reference internal" href="#ghc-flag--rtsopts[=⟨none|some|all⟩]"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-rtsopts[=⟨none|some|all⟩]</span></code></a> when they are not available. These
suggestions would be unhelpful if the users have installed Haskell programs
through their package managers. With this option enabled, these suggestions
will not appear. It is recommended for people distributing binaries to
build with either <code class="docutils literal"><span class="pre">-rtsopts</span></code> or <code class="docutils literal"><span class="pre">-no-rtsopts-suggestions</span></code>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fno-gen-manifest">
<code class="descname">-fno-gen-manifest</code><a class="headerlink" href="#ghc-flag--fno-gen-manifest" title="Permalink to this definition">¶</a></dt>
<dd><p>On Windows, GHC normally generates a manifestmanifest file when
linking a binary. The manifest is placed in the file
<code class="file docutils literal"><em><span class="pre">prog</span></em><span class="pre">.exe.manifest`</span></code> where ⟨prog.exe⟩ is the name of the
executable. The manifest file currently serves just one purpose: it
disables the “installer detection” in Windows
Vista that attempts to elevate privileges for executables with
certain names (e.g. names containing “install”, “setup” or “patch”).
Without the manifest file to turn off installer detection,
attempting to run an executable that Windows deems to be an
installer will return a permission error code to the invoker.
Depending on the invoker, the result might be a dialog box asking
the user for elevated permissions, or it might simply be a
permission denied error.</p>
<p>Installer detection can be also turned off globally for the system
using the security control panel, but GHC by default generates
binaries that don’t depend on the user having disabled installer
detection.</p>
<p>The <code class="docutils literal"><span class="pre">-fno-gen-manifest</span></code> disables generation of the manifest file.
One reason to do this would be if you had a manifest file of your
own, for example.</p>
<p>In the future, GHC might use the manifest file for more things, such
as supplying the location of dependent DLLs.</p>
<p><a class="reference internal" href="#ghc-flag--fno-gen-manifest"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fno-gen-manifest</span></code></a> also implies <a class="reference internal" href="#ghc-flag--fno-embed-manifest"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fno-embed-manifest</span></code></a>, see
below.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fno-embed-manifest">
<code class="descname">-fno-embed-manifest</code><a class="headerlink" href="#ghc-flag--fno-embed-manifest" title="Permalink to this definition">¶</a></dt>
<dd><p id="index-17">The manifest file that GHC generates when linking a binary on Windows is
also embedded in the executable itself, by default. This means that the
binary can be distributed without having to supply the manifest file too.
The embedding is done by running <strong class="command">windres</strong>; to see exactly what
GHC does to embed the manifest, use the <a class="reference internal" href="using.html#ghc-flag--v"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-v</span></code></a> flag. A GHC
installation comes with its own copy of <code class="docutils literal"><span class="pre">windres</span></code> for this reason.</p>
<p>See also <a class="reference internal" href="#ghc-flag--pgmwindres ⟨cmd⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-pgmwindres</span> <span class="pre">⟨cmd⟩</span></code></a> (<a class="reference internal" href="#replacing-phases"><span class="std std-ref">Replacing the program for one or more phases</span></a>) and
<a class="reference internal" href="#ghc-flag--optwindres ⟨option⟩"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-optwindres</span> <span class="pre">⟨option⟩</span></code></a> (<a class="reference internal" href="#forcing-options-through"><span class="std std-ref">Forcing options to a particular phase</span></a>).</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fno-shared-implib">
<code class="descname">-fno-shared-implib</code><a class="headerlink" href="#ghc-flag--fno-shared-implib" title="Permalink to this definition">¶</a></dt>
<dd><p>DLLs on Windows are typically linked to by linking to a
corresponding <code class="docutils literal"><span class="pre">.lib</span></code> or <code class="docutils literal"><span class="pre">.dll.a</span></code> — the so-called import library.
GHC will typically generate such a file for every DLL you create by
compiling in <a class="reference internal" href="#ghc-flag--shared"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-shared</span></code></a> mode. However, sometimes you don’t want to
pay the disk-space cost of creating this import library, which can
be substantial — it might require as much space as the code itself,
as Haskell DLLs tend to export lots of symbols.</p>
<p>As long as you are happy to only be able to link to the DLL using
<code class="docutils literal"><span class="pre">GetProcAddress</span></code> and friends, you can supply the
<a class="reference internal" href="#ghc-flag--fno-shared-implib"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fno-shared-implib</span></code></a> flag to disable the creation of the import
library entirely.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--dylib-install-name ⟨path⟩">
<code class="descname">-dylib-install-name</code><code class="descclassname"> ⟨path⟩</code><a class="headerlink" href="#ghc-flag--dylib-install-name ⟨path⟩" title="Permalink to this definition">¶</a></dt>
<dd><p>On Darwin/OS X, dynamic libraries are stamped at build time with an
“install name”, which is the ultimate install path of the library
file. Any libraries or executables that subsequently link against it
will pick up that path as their runtime search location for it. By
default, ghc sets the install name to the location where the library
is built. This option allows you to override it with the specified
file path. (It passes <code class="docutils literal"><span class="pre">-install_name</span></code> to Apple’s linker.) Ignored
on other platforms.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--rdynamic">
<code class="descname">-rdynamic</code><a class="headerlink" href="#ghc-flag--rdynamic" title="Permalink to this definition">¶</a></dt>
<dd><p>This instructs the linker to add all symbols, not only used ones, to
the dynamic symbol table. Currently Linux and Windows/MinGW32 only.
This is equivalent to using <code class="docutils literal"><span class="pre">-optl</span> <span class="pre">-rdynamic</span></code> on Linux, and
<code class="docutils literal"><span class="pre">-optl</span> <span class="pre">-export-all-symbols</span></code> on Windows.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--fwhole-archive-hs-libs">
<code class="descname">-fwhole-archive-hs-libs</code><a class="headerlink" href="#ghc-flag--fwhole-archive-hs-libs" title="Permalink to this definition">¶</a></dt>
<dd><p>When linking a binary executable, this inserts the flag
<code class="docutils literal"><span class="pre">-Wl,--whole-archive</span></code> before any <code class="docutils literal"><span class="pre">-l</span></code> flags for Haskell
libraries, and <code class="docutils literal"><span class="pre">-Wl,--no-whole-archive</span></code> afterwards (on OS X, the
flag is <code class="docutils literal"><span class="pre">-Wl,-all_load</span></code>, there is no equivalent for
<code class="docutils literal"><span class="pre">-Wl,--no-whole-archive</span></code>).  This flag also disables the use of
<code class="docutils literal"><span class="pre">-Wl,--gc-sections</span></code> (<code class="docutils literal"><span class="pre">-Wl,-dead_strip</span></code> on OS X).</p>
<p>This is for specialist applications that may require symbols
defined in these Haskell libraries at runtime even though they
aren’t referenced by any other code linked into the executable.
If you’re using <code class="docutils literal"><span class="pre">-fwhole-archive-hs-libs</span></code>, you probably also
want <code class="docutils literal"><span class="pre">-rdynamic</span></code>.</p>
</dd></dl>

<dl class="ghc-flag">
<dt id="ghc-flag--pie">
<code class="descname">-pie</code><a class="headerlink" href="#ghc-flag--pie" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Since:</th><td class="field-body">8.2.2</td>
</tr>
</tbody>
</table>
<p>This instructs the linker to produce a position-independent executable.
This flag is only valid while producing executables and all object code
being linked must have been produced with <a class="reference internal" href="#ghc-flag--fPIE"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-fPIE</span></code></a>.</p>
<p>Position independent executables are required by some platforms as they
enable address-space layout randomization (ASLR), a common security measure.
They can also be useful as they can be dynamically loaded and used as shared
libraries by other executables.</p>
<p>Position independent executables should be dynamically-linked (e.g. built
with <a class="reference internal" href="#ghc-flag--dynamic"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-dynamic</span></code></a> and only loaded into other dynamically-linked
executables to ensure that only one <code class="docutils literal"><span class="pre">libHSrts</span></code> is present if
loaded into the address space of another Haskell process.</p>
<p>Also, you may need to use the <a class="reference internal" href="#ghc-flag--rdynamic"><code class="xref std std-ghc-flag docutils literal"><span class="pre">-rdynamic</span></code></a> flag to ensure that
that symbols are not dropped from your PIE objects.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="shared_libs.html" title="7.12. Using shared libraries"
             >next</a> |</li>
        <li class="right" >
          <a href="codegens.html" title="7.10. GHC Backends"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">GHC 8.5.20180310 User&#39;s Guide</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="usage.html" >7. Using GHC</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2015, GHC Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>